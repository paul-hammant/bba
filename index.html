<html>

<head>
    <meta charset="UTF-8">
    <title>Branch By Abstraction</title>
    <script
            src="https://code.jquery.com/jquery-3.2.1.min.js"
            integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
            crossorigin="anonymous"></script>

    <!--Import Google Icon Font-->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    
    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">

    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>

    <!--<style>-->
        <!--svg {-->
            <!--max-width: 100%;-->
            <!--height: auto;-->
            <!--object-fit: cover;-->
        <!--}-->
    <!--</style>-->

</head>
<body>

<div class="container">

    <h2>Branch By Abstraction?</h2>

    <p>Yes, by abstraction instead of by source control control. And no, that doesn't mean sprinkle if conditions in
        your source code it means use an abstraction concept that's idiomatic for the language in question.</p>

    <p>Some non-functional changes to code are so quick that the migration barely registers in the team. Some are so long that they're
        going to be inconvenient for the development of normal functional deliverables. Specifically the non-functional changes
        would slow down everyone else's development throughput, if not outright risk breaking the build often.</p>

    <p>Branch by Abstraction is a procedure. You would introduce an abstraction to methodically chomp away at the non-functional
    change that you're needing to complete. While not jeopardising anyone else's throughput you complete your work, switch
    over in production and then <b>take out the abstraction</b>.</p>

    <p>Here's the procedure:</p>

    <h3>1. Identify the change that will take a while</h3>

    <svg xmlns="http://www.w3.org/2000/svg" width="566" height="487" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Add To\nShoppingCart\nRoute -> Shopping\nCart: addItem
        Shopping\nCart->Your\nPersistence\nTech: getDao
        Your\nPersistence\nTech->Shopping\nCart DAO: findOrCreate
        Shopping\nCart DAO->Shopping\nCart: here it is
        Shopping\nCart->Shopping\nCart DAO: save this
        Shopping\nCart DAO->Shopping\nCart: yup, saved
        Shopping\nCart->Add To\nShoppingCart\nRoute: added]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.9,16 0,13.7 5.7,8 0,2.2 1.9,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="10" y="20" width="137.1" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="21" y="45" ><tspan x="20">Add To</tspan><tspan dy="1.2em" x="20">ShoppingCart</tspan><tspan dy="1.2em" x="20">Route</tspan></text></g><g class="actor"><rect x="10" y="390.4" width="137.1" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="21" y="415.4" ><tspan x="20">Add To</tspan><tspan dy="1.2em" x="20">ShoppingCart</tspan><tspan dy="1.2em" x="20">Route</tspan></text></g><line x1="78.5" x2="78.5" y1="97.4" y2="390.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="167.1" y="20" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="178.1" y="54.6" ><tspan x="177.1">Shopping</tspan><tspan dy="1.2em" x="177.1">Cart</tspan></text></g><g class="actor"><rect x="167.1" y="390.4" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="178.1" y="425.0" ><tspan x="177.1">Shopping</tspan><tspan dy="1.2em" x="177.1">Cart</tspan></text></g><line x1="216.5" x2="216.5" y1="97.4" y2="390.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="286" y="20" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="297" y="45" ><tspan x="296">Your</tspan><tspan dy="1.2em" x="296">Persistence</tspan><tspan dy="1.2em" x="296">Tech</tspan></text></g><g class="actor"><rect x="286" y="390.4" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="297" y="415.4" ><tspan x="296">Your</tspan><tspan dy="1.2em" x="296">Persistence</tspan><tspan dy="1.2em" x="296">Tech</tspan></text></g><line x1="349.7" x2="349.7" y1="97.4" y2="390.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="437.5" y="20" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="448.5" y="54.6" ><tspan x="447.5">Shopping</tspan><tspan dy="1.2em" x="447.5">Cart DAO</tspan></text></g><g class="actor"><rect x="437.5" y="390.4" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="448.5" y="425.0" ><tspan x="447.5">Shopping</tspan><tspan dy="1.2em" x="447.5">Cart DAO</tspan></text></g><line x1="486.9" x2="486.9" y1="97.4" y2="390.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="signal"><text x="114" y="127.9" ><tspan x="113">addItem</tspan></text><line x1="78.5" x2="216.5" y1="136.4" y2="136.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="254.3" y="166.9" ><tspan x="253.3">getDao</tspan></text><line x1="216.5" x2="349.7" y1="175.4" y2="175.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="360.7" y="205.9" ><tspan x="359.7">findOrCreate</tspan></text><line x1="349.7" x2="486.9" y1="214.4" y2="214.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="303.7" y="244.9" ><tspan x="302.7">here it is</tspan></text><line x1="486.9" x2="216.5" y1="253.4" y2="253.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="308.5" y="283.9" ><tspan x="307.5">save this</tspan></text><line x1="216.5" x2="486.9" y1="292.4" y2="292.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="303.7" y="322.9" ><tspan x="302.7">yup, saved</tspan></text><line x1="486.9" x2="216.5" y1="331.4" y2="331.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="123.5" y="361.9" ><tspan x="122.5">added</tspan></text><line x1="216.5" x2="78.5" y1="370.4" y2="370.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g></svg>

    <h3>2. Introduce an abstraction</h3>

    <svg xmlns="http://www.w3.org/2000/svg" width="714" height="565" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Add To\nShoppingCart\nRoute -> Shopping\nCart: addItem
        Shopping\nCart->Temporary\nAbstraction: addItem
        Temporary\nAbstraction->Your\nPersistence\nTech: getDao
        Your\nPersistence\nTech->Shopping\nCart DAO: findOrCreate
        Shopping\nCart DAO->Temporary\nAbstraction: here it is
        Temporary\nAbstraction->Shopping\nCart DAO: save this
        Shopping\nCart DAO->Temporary\nAbstraction: yup, saved
        Temporary\nAbstraction->Shopping\nCart: added
        Shopping\nCart->Add To\nShoppingCart\nRoute: added]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.9,16 0,13.7 5.7,8 0,2.2 1.9,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="10" y="20" width="137.1" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="21" y="45" ><tspan x="20">Add To</tspan><tspan dy="1.2em" x="20">ShoppingCart</tspan><tspan dy="1.2em" x="20">Route</tspan></text></g><g class="actor"><rect x="10" y="468.4" width="137.1" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="21" y="493.4" ><tspan x="20">Add To</tspan><tspan dy="1.2em" x="20">ShoppingCart</tspan><tspan dy="1.2em" x="20">Route</tspan></text></g><line x1="78.5" x2="78.5" y1="97.4" y2="468.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="167.1" y="20" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="178.1" y="54.6" ><tspan x="177.1">Shopping</tspan><tspan dy="1.2em" x="177.1">Cart</tspan></text></g><g class="actor"><rect x="167.1" y="468.4" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="178.1" y="503.0" ><tspan x="177.1">Shopping</tspan><tspan dy="1.2em" x="177.1">Cart</tspan></text></g><line x1="216.5" x2="216.5" y1="97.4" y2="468.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="286" y="20" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="297" y="54.6" ><tspan x="296">Temporary</tspan><tspan dy="1.2em" x="296">Abstraction</tspan></text></g><g class="actor"><rect x="286" y="468.4" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="297" y="503.0" ><tspan x="296">Temporary</tspan><tspan dy="1.2em" x="296">Abstraction</tspan></text></g><line x1="349.7" x2="349.7" y1="97.4" y2="468.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="433.5" y="20" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="444.5" y="45" ><tspan x="443.5">Your</tspan><tspan dy="1.2em" x="443.5">Persistence</tspan><tspan dy="1.2em" x="443.5">Tech</tspan></text></g><g class="actor"><rect x="433.5" y="468.4" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="444.5" y="493.4" ><tspan x="443.5">Your</tspan><tspan dy="1.2em" x="443.5">Persistence</tspan><tspan dy="1.2em" x="443.5">Tech</tspan></text></g><line x1="497.3" x2="497.3" y1="97.4" y2="468.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="585.1" y="20" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="596.1" y="54.6" ><tspan x="595.1">Shopping</tspan><tspan dy="1.2em" x="595.1">Cart DAO</tspan></text></g><g class="actor"><rect x="585.1" y="468.4" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="596.1" y="503.0" ><tspan x="595.1">Shopping</tspan><tspan dy="1.2em" x="595.1">Cart DAO</tspan></text></g><line x1="634.5" x2="634.5" y1="97.4" y2="468.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="signal"><text x="114" y="127.9" ><tspan x="113">addItem</tspan></text><line x1="78.5" x2="216.5" y1="136.4" y2="136.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="249.6" y="166.9" ><tspan x="248.6">addItem</tspan></text><line x1="216.5" x2="349.7" y1="175.4" y2="175.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="394.7" y="205.9" ><tspan x="393.7">getDao</tspan></text><line x1="349.7" x2="497.3" y1="214.4" y2="214.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="508.3" y="244.9" ><tspan x="507.3">findOrCreate</tspan></text><line x1="497.3" x2="634.5" y1="253.4" y2="253.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="444.1" y="283.9" ><tspan x="443.1">here it is</tspan></text><line x1="634.5" x2="349.7" y1="292.4" y2="292.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="448.9" y="322.9" ><tspan x="447.9">save this</tspan></text><line x1="349.7" x2="634.5" y1="331.4" y2="331.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="444.1" y="361.9" ><tspan x="443.1">yup, saved</tspan></text><line x1="634.5" x2="349.7" y1="370.4" y2="370.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="259.1" y="400.9" ><tspan x="258.1">added</tspan></text><line x1="349.7" x2="216.5" y1="409.4" y2="409.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="123.5" y="439.9" ><tspan x="122.5">added</tspan></text><line x1="216.5" x2="78.5" y1="448.4" y2="448.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g></svg>

    <h3>3. Sensible renames</h3>

    <svg xmlns="http://www.w3.org/2000/svg" width="714" height="565" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Add To\nShoppingCart\nRoute -> Shopping\nCart: addItem
        Shopping\nCart->Temporary\nAbstraction: addItem
        Temporary\nAbstraction->Legacy\nPersistence\nTech: getDao
        Legacy\nPersistence\nTech->Legacy\nShopping\nCart DAO: findOrCreate
        Legacy\nShopping\nCart DAO->Temporary\nAbstraction: here it is
        Temporary\nAbstraction->Legacy\nShopping\nCart DAO: save this
        Legacy\nShopping\nCart DAO->Temporary\nAbstraction: yup, saved
        Temporary\nAbstraction->Shopping\nCart: added
        Shopping\nCart->Add To\nShoppingCart\nRoute: added]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.9,16 0,13.7 5.7,8 0,2.2 1.9,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="10" y="20" width="137.1" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="21" y="45" ><tspan x="20">Add To</tspan><tspan dy="1.2em" x="20">ShoppingCart</tspan><tspan dy="1.2em" x="20">Route</tspan></text></g><g class="actor"><rect x="10" y="468.4" width="137.1" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="21" y="493.4" ><tspan x="20">Add To</tspan><tspan dy="1.2em" x="20">ShoppingCart</tspan><tspan dy="1.2em" x="20">Route</tspan></text></g><line x1="78.5" x2="78.5" y1="97.4" y2="468.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="167.1" y="20" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="178.1" y="54.6" ><tspan x="177.1">Shopping</tspan><tspan dy="1.2em" x="177.1">Cart</tspan></text></g><g class="actor"><rect x="167.1" y="468.4" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="178.1" y="503.0" ><tspan x="177.1">Shopping</tspan><tspan dy="1.2em" x="177.1">Cart</tspan></text></g><line x1="216.5" x2="216.5" y1="97.4" y2="468.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="286" y="20" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="297" y="54.6" ><tspan x="296">Temporary</tspan><tspan dy="1.2em" x="296">Abstraction</tspan></text></g><g class="actor"><rect x="286" y="468.4" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="297" y="503.0" ><tspan x="296">Temporary</tspan><tspan dy="1.2em" x="296">Abstraction</tspan></text></g><line x1="349.7" x2="349.7" y1="97.4" y2="468.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="433.5" y="20" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="444.5" y="45" ><tspan x="443.5">Legacy</tspan><tspan dy="1.2em" x="443.5">Persistence</tspan><tspan dy="1.2em" x="443.5">Tech</tspan></text></g><g class="actor"><rect x="433.5" y="468.4" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="444.5" y="493.4" ><tspan x="443.5">Legacy</tspan><tspan dy="1.2em" x="443.5">Persistence</tspan><tspan dy="1.2em" x="443.5">Tech</tspan></text></g><line x1="497.3" x2="497.3" y1="97.4" y2="468.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="585.1" y="20" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="596.1" y="45" ><tspan x="595.1">Legacy</tspan><tspan dy="1.2em" x="595.1">Shopping</tspan><tspan dy="1.2em" x="595.1">Cart DAO</tspan></text></g><g class="actor"><rect x="585.1" y="468.4" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="596.1" y="493.4" ><tspan x="595.1">Legacy</tspan><tspan dy="1.2em" x="595.1">Shopping</tspan><tspan dy="1.2em" x="595.1">Cart DAO</tspan></text></g><line x1="634.5" x2="634.5" y1="97.4" y2="468.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="signal"><text x="114" y="127.9" ><tspan x="113">addItem</tspan></text><line x1="78.5" x2="216.5" y1="136.4" y2="136.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="249.6" y="166.9" ><tspan x="248.6">addItem</tspan></text><line x1="216.5" x2="349.7" y1="175.4" y2="175.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="394.7" y="205.9" ><tspan x="393.7">getDao</tspan></text><line x1="349.7" x2="497.3" y1="214.4" y2="214.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="508.3" y="244.9" ><tspan x="507.3">findOrCreate</tspan></text><line x1="497.3" x2="634.5" y1="253.4" y2="253.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="444.1" y="283.9" ><tspan x="443.1">here it is</tspan></text><line x1="634.5" x2="349.7" y1="292.4" y2="292.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="448.9" y="322.9" ><tspan x="447.9">save this</tspan></text><line x1="349.7" x2="634.5" y1="331.4" y2="331.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="444.1" y="361.9" ><tspan x="443.1">yup, saved</tspan></text><line x1="634.5" x2="349.7" y1="370.4" y2="370.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="259.1" y="400.9" ><tspan x="258.1">added</tspan></text><line x1="349.7" x2="216.5" y1="409.4" y2="409.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="123.5" y="439.9" ><tspan x="122.5">added</tspan></text><line x1="216.5" x2="78.5" y1="448.4" y2="448.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g></svg>

    <h3>4. Only the devs working on the migration see the new technology, in a crucial primordial section of code.</h3>

    <p>This is because there's a single toggle/flag flipped for those developers.</p>

    <svg xmlns="http://www.w3.org/2000/svg" width="1014" height="605" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Add To\nShoppingCart\nRoute -> Shopping\nCart: addItem
        Shopping\nCart->Temporary\nAbstraction\n(ormToggle=new): addItem
        Temporary\nAbstraction\n(ormToggle=new)-->Legacy\nPersistence\nTech:
        Temporary\nAbstraction\n(ormToggle=new)->New\nPersistence\nTech: getDao
        Legacy\nPersistence\nTech-->Legacy\nShopping\nCart DAO:
        New\nPersistence\nTech->New\nShopping\nCart DAO: findOrCreate
        New\nShopping\nCart DAO->Temporary\nAbstraction\n(ormToggle=new): here it is
        Temporary\nAbstraction\n(ormToggle=new)->New\nShopping\nCart DAO: save this
        New\nShopping\nCart DAO->Temporary\nAbstraction\n(ormToggle=new): yup, saved
        Temporary\nAbstraction\n(ormToggle=new)->Shopping\nCart: added
        Shopping\nCart->Add To\nShoppingCart\nRoute: added
        ]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.9,16 0,13.7 5.7,8 0,2.2 1.9,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="10" y="20" width="137.1" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="21" y="45" ><tspan x="20">Add To</tspan><tspan dy="1.2em" x="20">ShoppingCart</tspan><tspan dy="1.2em" x="20">Route</tspan></text></g><g class="actor"><rect x="10" y="508.4" width="137.1" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="21" y="533.4" ><tspan x="20">Add To</tspan><tspan dy="1.2em" x="20">ShoppingCart</tspan><tspan dy="1.2em" x="20">Route</tspan></text></g><line x1="78.5" x2="78.5" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="167.1" y="20" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="178.1" y="54.6" ><tspan x="177.1">Shopping</tspan><tspan dy="1.2em" x="177.1">Cart</tspan></text></g><g class="actor"><rect x="167.1" y="508.4" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="178.1" y="543.0" ><tspan x="177.1">Shopping</tspan><tspan dy="1.2em" x="177.1">Cart</tspan></text></g><line x1="216.5" x2="216.5" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="286" y="20" width="166" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="297" y="45" ><tspan x="296">Temporary</tspan><tspan dy="1.2em" x="296">Abstraction</tspan><tspan dy="1.2em" x="296">(ormToggle=new)</tspan></text></g><g class="actor"><rect x="286" y="508.4" width="166" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="297" y="533.4" ><tspan x="296">Temporary</tspan><tspan dy="1.2em" x="296">Abstraction</tspan><tspan dy="1.2em" x="296">(ormToggle=new)</tspan></text></g><line x1="369" x2="369" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="472" y="20" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="483" y="45" ><tspan x="482">Legacy</tspan><tspan dy="1.2em" x="482">Persistence</tspan><tspan dy="1.2em" x="482">Tech</tspan></text></g><g class="actor"><rect x="472" y="508.4" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="483" y="533.4" ><tspan x="482">Legacy</tspan><tspan dy="1.2em" x="482">Persistence</tspan><tspan dy="1.2em" x="482">Tech</tspan></text></g><line x1="535.7" x2="535.7" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="619.5" y="20" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="630.5" y="45" ><tspan x="629.5">New</tspan><tspan dy="1.2em" x="629.5">Persistence</tspan><tspan dy="1.2em" x="629.5">Tech</tspan></text></g><g class="actor"><rect x="619.5" y="508.4" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="630.5" y="533.4" ><tspan x="629.5">New</tspan><tspan dy="1.2em" x="629.5">Persistence</tspan><tspan dy="1.2em" x="629.5">Tech</tspan></text></g><line x1="683.3" x2="683.3" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="767.1" y="20" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="778.1" y="45" ><tspan x="777.1">Legacy</tspan><tspan dy="1.2em" x="777.1">Shopping</tspan><tspan dy="1.2em" x="777.1">Cart DAO</tspan></text></g><g class="actor"><rect x="767.1" y="508.4" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="778.1" y="533.4" ><tspan x="777.1">Legacy</tspan><tspan dy="1.2em" x="777.1">Shopping</tspan><tspan dy="1.2em" x="777.1">Cart DAO</tspan></text></g><line x1="816.5" x2="816.5" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="886" y="20" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="897" y="45" ><tspan x="896">New</tspan><tspan dy="1.2em" x="896">Shopping</tspan><tspan dy="1.2em" x="896">Cart DAO</tspan></text></g><g class="actor"><rect x="886" y="508.4" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="897" y="533.4" ><tspan x="896">New</tspan><tspan dy="1.2em" x="896">Shopping</tspan><tspan dy="1.2em" x="896">Cart DAO</tspan></text></g><line x1="935.4" x2="935.4" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="signal"><text x="114" y="127.9" ><tspan x="113">addItem</tspan></text><line x1="78.5" x2="216.5" y1="136.4" y2="136.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="259.2" y="166.9" ><tspan x="258.2">addItem</tspan></text><line x1="216.5" x2="369" y1="175.4" y2="175.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="452.3" y="200.4" ><tspan x="452.3"></tspan></text><line x1="369" x2="535.7" y1="195.4" y2="195.4" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="497.3" y="225.9" ><tspan x="496.3">getDao</tspan></text><line x1="369" x2="683.3" y1="234.4" y2="234.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="676.1" y="259.4" ><tspan x="676.1"></tspan></text><line x1="535.7" x2="816.5" y1="254.4" y2="254.4" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="751.8" y="284.9" ><tspan x="750.8">findOrCreate</tspan></text><line x1="683.3" x2="935.4" y1="293.4" y2="293.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="604.2" y="323.9" ><tspan x="603.2">here it is</tspan></text><line x1="935.4" x2="369" y1="332.4" y2="332.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="609" y="362.9" ><tspan x="608">save this</tspan></text><line x1="369" x2="935.4" y1="371.4" y2="371.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="604.2" y="401.9" ><tspan x="603.2">yup, saved</tspan></text><line x1="935.4" x2="369" y1="410.4" y2="410.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="268.7" y="440.9" ><tspan x="267.7">added</tspan></text><line x1="369" x2="216.5" y1="449.4" y2="449.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="123.5" y="479.9" ><tspan x="122.5">added</tspan></text><line x1="216.5" x2="78.5" y1="488.4" y2="488.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g></svg>

    <p>That could literally be code:</p>


    <p>But it is more likely to be outside in a YAML, XML, JSON or properties file (local or remote).</p>


    <h3>5. Everyone else sees the old persistence tech</h3>

    <svg xmlns="http://www.w3.org/2000/svg" width="1014" height="605" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[Add To\nShoppingCart\nRoute -> Shopping\nCart: addItem
        Shopping\nCart->Temporary\nAbstraction\n(ormToggle=old): addItem
        Temporary\nAbstraction\n(ormToggle=old)->Legacy\nPersistence\nTech:
        Temporary\nAbstraction\n(ormToggle=old)-->New\nPersistence\nTech: getDao
        Legacy\nPersistence\nTech->Legacy\nShopping\nCart DAO:
        New\nPersistence\nTech-->New\nShopping\nCart DAO: findOrCreate
        Legacy\nShopping\nCart DAO->Temporary\nAbstraction\n(ormToggle=old): here it is
        Temporary\nAbstraction\n(ormToggle=old)->Legacy\nShopping\nCart DAO: save this
        Legacy\nShopping\nCart DAO->Temporary\nAbstraction\n(ormToggle=old): yup, saved
        Temporary\nAbstraction\n(ormToggle=old)->Shopping\nCart: added
        Shopping\nCart->Add To\nShoppingCart\nRoute: added
        ]]></source><desc></desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.9,16 0,13.7 5.7,8 0,2.2 1.9,0 9.6,8 z"></path></marker></defs><g class="title"></g><g class="actor"><rect x="10" y="20" width="137.1" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="21" y="45" ><tspan x="20">Add To</tspan><tspan dy="1.2em" x="20">ShoppingCart</tspan><tspan dy="1.2em" x="20">Route</tspan></text></g><g class="actor"><rect x="10" y="508.4" width="137.1" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="21" y="533.4" ><tspan x="20">Add To</tspan><tspan dy="1.2em" x="20">ShoppingCart</tspan><tspan dy="1.2em" x="20">Route</tspan></text></g><line x1="78.5" x2="78.5" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="167.1" y="20" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="178.1" y="54.6" ><tspan x="177.1">Shopping</tspan><tspan dy="1.2em" x="177.1">Cart</tspan></text></g><g class="actor"><rect x="167.1" y="508.4" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="178.1" y="543.0" ><tspan x="177.1">Shopping</tspan><tspan dy="1.2em" x="177.1">Cart</tspan></text></g><line x1="216.5" x2="216.5" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="286" y="20" width="166" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="297" y="45" ><tspan x="296">Temporary</tspan><tspan dy="1.2em" x="296">Abstraction</tspan><tspan dy="1.2em" x="296">(ormToggle=old)</tspan></text></g><g class="actor"><rect x="286" y="508.4" width="166" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="297" y="533.4" ><tspan x="296">Temporary</tspan><tspan dy="1.2em" x="296">Abstraction</tspan><tspan dy="1.2em" x="296">(ormToggle=old)</tspan></text></g><line x1="369" x2="369" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="472" y="20" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="483" y="45" ><tspan x="482">Legacy</tspan><tspan dy="1.2em" x="482">Persistence</tspan><tspan dy="1.2em" x="482">Tech</tspan></text></g><g class="actor"><rect x="472" y="508.4" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="483" y="533.4" ><tspan x="482">Legacy</tspan><tspan dy="1.2em" x="482">Persistence</tspan><tspan dy="1.2em" x="482">Tech</tspan></text></g><line x1="535.7" x2="535.7" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="619.5" y="20" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="630.5" y="45" ><tspan x="629.5">New</tspan><tspan dy="1.2em" x="629.5">Persistence</tspan><tspan dy="1.2em" x="629.5">Tech</tspan></text></g><g class="actor"><rect x="619.5" y="508.4" width="127.5" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="630.5" y="533.4" ><tspan x="629.5">New</tspan><tspan dy="1.2em" x="629.5">Persistence</tspan><tspan dy="1.2em" x="629.5">Tech</tspan></text></g><line x1="683.3" x2="683.3" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="767.1" y="20" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="778.1" y="45" ><tspan x="777.1">Legacy</tspan><tspan dy="1.2em" x="777.1">Shopping</tspan><tspan dy="1.2em" x="777.1">Cart DAO</tspan></text></g><g class="actor"><rect x="767.1" y="508.4" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="778.1" y="533.4" ><tspan x="777.1">Legacy</tspan><tspan dy="1.2em" x="777.1">Shopping</tspan><tspan dy="1.2em" x="777.1">Cart DAO</tspan></text></g><line x1="816.5" x2="816.5" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="actor"><rect x="886" y="20" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="897" y="45" ><tspan x="896">New</tspan><tspan dy="1.2em" x="896">Shopping</tspan><tspan dy="1.2em" x="896">Cart DAO</tspan></text></g><g class="actor"><rect x="886" y="508.4" width="98.8" height="77.4" style="stroke-width: 2;" stroke="#000000" fill="#ffffff"></rect><text x="897" y="533.4" ><tspan x="896">New</tspan><tspan dy="1.2em" x="896">Shopping</tspan><tspan dy="1.2em" x="896">Cart DAO</tspan></text></g><line x1="935.4" x2="935.4" y1="97.4" y2="508.4" style="stroke-width: 2;" stroke="#000000" fill="none"></line><g class="signal"><text x="114" y="127.9" ><tspan x="113">addItem</tspan></text><line x1="78.5" x2="216.5" y1="136.4" y2="136.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="259.2" y="166.9" ><tspan x="258.2">addItem</tspan></text><line x1="216.5" x2="369" y1="175.4" y2="175.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="452.3" y="200.4" ><tspan x="452.3"></tspan></text><line x1="369" x2="535.7" y1="195.4" y2="195.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="497.3" y="225.9" ><tspan x="496.3">getDao</tspan></text><line x1="369" x2="683.3" y1="234.4" y2="234.4" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="676.1" y="259.4" ><tspan x="676.1"></tspan></text><line x1="535.7" x2="816.5" y1="254.4" y2="254.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="751.8" y="284.9" ><tspan x="750.8">findOrCreate</tspan></text><line x1="683.3" x2="935.4" y1="293.4" y2="293.4" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="544.7" y="323.9" ><tspan x="543.7">here it is</tspan></text><line x1="816.5" x2="369" y1="332.4" y2="332.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="549.5" y="362.9" ><tspan x="548.5">save this</tspan></text><line x1="369" x2="816.5" y1="371.4" y2="371.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="544.7" y="401.9" ><tspan x="543.7">yup, saved</tspan></text><line x1="816.5" x2="369" y1="410.4" y2="410.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="268.7" y="440.9" ><tspan x="267.7">added</tspan></text><line x1="369" x2="216.5" y1="449.4" y2="449.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g><g class="signal"><text x="123.5" y="479.9" ><tspan x="122.5">added</tspan></text><line x1="216.5" x2="78.5" y1="488.4" y2="488.4" style="stroke-width: 2; marker-end: url(#markerArrowBlock);" stroke="#000000" fill="none"></line></g></svg>


</div>


<script type="text/javascript">

    $("svg").find("*").removeAttr("stroke");
    $("g").attr("stroke", "black");
    $("line").attr("stroke", "#000000");


    var colorize =  function(elem, yesColor, noColor) {

        $(elem).find('tspan:contains("New")').filter(function () {
            return $(this).text() == "New";
        }).parent().parent().attr('stroke', yesColor);

        $(elem).find('tspan:contains("New")').filter(function () {
            return $(this).text() == "New";
        }).parent().parent().next().attr('stroke', yesColor);

        $(elem).find('tspan:contains("Legacy")').filter(function () {
            return $(this).text() == "Legacy";
        }).parent().parent().attr('stroke', noColor);

        $(elem).find('tspan:contains("Legacy")').filter(function () {
            return $(this).text() == "Legacy";
        }).parent().parent().next().attr('stroke', noColor);

        $(elem).find('tspan:contains("Legacy")').filter(function () {
            return $(this).text() == "Legacy";
        }).parent().parent().next().filter('line').attr('stroke', noColor).attr('stroke-dasharray', '5, 5');
    };

//    alert($( "body svg:nth-child(2)").text());

    colorize($( "body svg")[3], 'lime', 'lightgrey');
    colorize($( "body svg")[4], 'lightgrey', 'lime');


//    stroke-dasharray

    $( "line[style*='stroke-dasharray']" ).attr('stroke', 'lightgrey');


    $('svg').each(function(i, item) {
        var img_width = $(item).width();
        var img_height = $(item).height();
        var div_width = $(item).parent().width();
        if(img_width < div_width){
            //IMAGE IS NARROWER THAN CONTAINER WIDTH - CENTER IT HORIZONTALLY
            var newMargin = (div_width-img_width)/2+'px';
            $(item).attr({'style': "font-size: 16px; font-family: Andale Mono, monospace; margin-left: " + newMargin});
        } else if(img_width>div_width) {
            var ratio = img_width / div_width;
            //IMAGE IS GREATER THAN CONTAINER HEIGHT - REDUCE WIDTH/HEIGHT PROPORTIONALLY
            $(item).removeAttr("width");
            $(item).removeAttr("height");
            $(item).attr({'style': "width: 100%; height: auto; font-size: 16px; font-family: Andale Mono, monospace;"});
            $(item).attr({'preserveAspectRatio': "xMinYMin meet"});
            $(item).attr({'viewBox': "0 0 " + img_width * ratio + " " + img_height * ratio});

        }
        $(item).addClass("z-depth-2");

    });

</script>

</body>

</html>
